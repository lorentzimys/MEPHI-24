# Задание № 1: Раздел добычи между разбойниками

## Постановка задачи

N разбойников делят добычу. У каждого из них свое мнение о ценности той или иной доли добычи, и каждый из них хочет получить не меньше, чем 1/N долю добычи (со своей точки зрения). Требуется придумать алгоритм разделения добычи между разбойниками, чтобы каждый остался доволен.

---

## 1. Решение для N = 2

### Алгоритм "Раздели и выбери" (Divide and Choose)

**Описание алгоритма:**
1. Первый разбойник делит добычу на две части, которые он считает равными по ценности.
2. Второй разбойник выбирает ту часть, которую считает более ценной (или любую, если считает их равными).
3. Первый разбойник получает оставшуюся часть.

### Обоснование справедливости:

- **Первый разбойник доволен:** Он сам разделил добычу на две равные (с его точки зрения) части, поэтому независимо от выбора второго, он получит ровно 1/2 добычи (со своей точки зрения).
- **Второй разбойник доволен:** Он выбирает лучшую часть из двух, поэтому получит не менее 1/2 добычи (со своей точки зрения).

**Результат:** Оба разбойника получают не менее 1/2 добычи со своей точки зрения. Алгоритм обеспечивает справедливость (fairness) в смысле пропорционального раздела.

---

## 2. Алгоритм для N = 3 (первый разбойник делит на три части)

### Описание алгоритма:

1. **Первый разбойник** делит всю добычу на три части, которые он считает равными по ценности.
2. **Второй и третий разбойники** оценивают эти три части.
3. Если есть часть, которую оба (второй и третий) считают наименее ценной, то:
   - Эта часть достается первому разбойнику.
   - Оставшиеся две части делятся между вторым и третьим по алгоритму для N = 2 (второй делит, третий выбирает).
4. Если такой части нет (т.е. второй и третий не согласны, какая часть наименее ценная), то:
   - Второй разбойник указывает, какую часть он считает наименее ценной.
   - Третий разбойник выбирает одну из оставшихся двух частей.
   - Второй разбойник получает оставшуюся часть.
   - Первый разбойник получает часть, указанную вторым как наименее ценную.

### Обоснование справедливости:

- **Первый разбойник:** Он сам разделил добычу на три равные (с его точки зрения) части, поэтому получит ровно 1/3 добычи (со своей точки зрения).
- **Второй и третий разбойники:** Они получают возможность выбрать лучшие части из оставшихся, поэтому каждый получит не менее 1/3 добычи (со своей точки зрения).

**Результат:** Все три разбойника получают не менее 1/3 добычи со своей точки зрения.

---

## 3. Обоснование предложенного алгоритма для троих

### Описание алгоритма:

1. Двое (первый и второй) делят всю добычу между собой.
2. Затем третий делит долю каждого из первых двух разбойников на три части.
3. Двое первых выбирают по меньшей части из своих трех частей и отдают третьему.

### Обоснование справедливости:

**Для первого и второго разбойников:**
- Они делят добычу между собой по алгоритму для N = 2, поэтому каждый получает не менее 1/2 добычи (со своей точки зрения).
- Затем каждый отдает третьему наименьшую часть из своей доли, которая составляет не более 1/3 от его доли.
- Следовательно, каждый из них сохраняет не менее 2/3 от своей доли, что составляет не менее 2/3 × 1/2 = 1/3 добычи (со своей точки зрения).

**Для третьего разбойника:**
- Он делит долю первого разбойника на три части, которые он считает равными, и получает наименьшую (с точки зрения первого).
- Аналогично, он делит долю второго разбойника на три части и получает наименьшую (с точки зрения второго).
- Поскольку третий сам делил эти доли на равные (с его точки зрения) части, он получает не менее 1/3 от доли первого и не менее 1/3 от доли второго.
- Если доли первого и второго вместе составляют всю добычу, то третий получает не менее 1/3 добычи (со своей точки зрения).

**Результат:** Все три разбойника получают не менее 1/3 добычи со своей точки зрения. Алгоритм корректен.

---

## 4. Проверка алгоритма для N = 4

### Описание алгоритма:

1. Трое делят все между собой.
2. Затем каждый из них делит свою порцию на четыре части.
3. Последний (четвертый) разбойник забирает по лучшему куску у каждого.

### Анализ справедливости:

**Для четвертого разбойника:**
- Он выбирает лучший кусок из четырех частей, на которые первый разбойник разделил свою долю. Следовательно, он получает не менее 1/4 от доли первого разбойника (со своей точки зрения).
- Аналогично для долей второго и третьего разбойников.
- Поскольку доли первых трех вместе составляют всю добычу, четвертый получает не менее 1/4 добычи (со своей точки зрения).

**Для первых трех разбойников:**
- Они делят добычу между собой, поэтому каждый получает не менее 1/3 добычи (со своей точки зрения).
- Затем каждый делит свою долю на четыре равные (с его точки зрения) части.
- Четвертый забирает лучший кусок, который составляет не более 1/4 от доли каждого.
- Следовательно, каждый из первых трех сохраняет не менее 3/4 от своей доли, что составляет не менее 3/4 × 1/3 = 1/4 добычи (со своей точки зрения).

**Результат:** Алгоритм работает для N = 4. Все четыре разбойника получают не менее 1/4 добычи со своей точки зрения.

---

## 5. Общий алгоритм для N разбойников

### Рекурсивный алгоритм "Последний уменьшает, первый выбирает" (Last Diminisher)

**Описание алгоритма:**

1. **Базовый случай:** Для N = 1, разбойник получает всю добычу.
2. **Для N = 2:** Используется алгоритм "Раздели и выбери".
3. **Для N > 2:** 
   - Первый разбойник делит добычу на N частей, которые он считает равными.
   - Второй разбойник оценивает части. Если он считает, что какая-то часть больше 1/N, он может "уменьшить" её до 1/N (отрезав излишек), и этот излишек добавляется к остатку.
   - Третий разбойник делает то же самое с текущим состоянием частей.
   - И так далее, пока все N разбойников не оценят части.
   - Последний разбойник, который уменьшил часть, получает её.
   - Оставшиеся N-1 разбойников рекурсивно делят оставшуюся добычу.

### Альтернативный алгоритм (на основе идей из пунктов 2-4):

**Описание:**
1. Первые (N-1) разбойников делят всю добычу между собой по алгоритму для (N-1) участников.
2. Каждый из первых (N-1) разбойников делит свою долю на N равных (с его точки зрения) частей.
3. Последний (N-й) разбойник выбирает по одной части из доли каждого из первых (N-1) разбойников (выбирает лучшие части со своей точки зрения).
4. Первые (N-1) разбойников получают оставшиеся части своих долей.

### Обоснование справедливости общего алгоритма:

**Для N-го разбойника:**
- Он выбирает лучшую часть из N частей, на которые каждый из первых (N-1) разбойников разделил свою долю.
- Следовательно, он получает не менее 1/N от доли каждого из первых (N-1) разбойников.
- Поскольку доли первых (N-1) разбойников вместе составляют всю добычу, N-й разбойник получает не менее 1/N добычи (со своей точки зрения).

**Для первых (N-1) разбойников:**
- Они делят добычу между собой, поэтому каждый получает не менее 1/(N-1) добычи (со своей точки зрения).
- Затем каждый делит свою долю на N равных (с его точки зрения) частей.
- N-й разбойник забирает лучший кусок, который составляет не более 1/N от доли каждого.
- Следовательно, каждый из первых (N-1) разбойников сохраняет не менее (N-1)/N от своей доли, что составляет не менее (N-1)/N × 1/(N-1) = 1/N добычи (со своей точки зрения).

**Результат:** Алгоритм обеспечивает справедливость для любого N. Каждый разбойник получает не менее 1/N добычи со своей точки зрения.

---

## 6. Связь с теорией игр

### Можно ли переложить эту задачу на язык теории игр?

**Да, эту задачу можно формализовать в терминах теории игр.**

### Тип игры:

Эта задача относится к **кооперативным играм** (cooperative games) с **переговорами** (bargaining games), а также может рассматриваться как **игра справедливого раздела** (fair division game).

**Характеристики игры:**
- **Игроки:** N разбойников
- **Стратегии:** Каждый игрок может выбирать, как делить добычу и какую часть выбрать
- **Выигрыши:** Доля добычи, которую получает каждый разбойник (оценивается индивидуально каждым игроком)
- **Особенность:** Выигрыши зависят от субъективных оценок игроков, а не от объективных значений

### Равновесие Нэша:

**Равновесие Нэша существует** в этой игре при использовании предложенных алгоритмов.

**Обоснование:**
1. **Для алгоритма "Раздели и выбери" (N = 2):**
   - Если первый разбойник делит добычу на две равные (с его точки зрения) части, то независимо от выбора второго, первый получит ровно 1/2. У него нет стимула отклоняться от этой стратегии.
   - Если второй разбойник выбирает лучшую часть, то он максимизирует свой выигрыш. У него нет стимула выбирать худшую часть.
   - Это равновесие Нэша.

2. **Для общего алгоритма (N > 2):**
   - Если каждый разбойник следует алгоритму (первые делят справедливо, последний выбирает лучшие части), то:
     - У первых (N-1) разбойников нет стимула делить добычу несправедливо, так как это может привести к тому, что они получат меньше.
     - У N-го разбойника нет стимула выбирать худшие части вместо лучших.
   - Это также равновесие Нэша.

### Дополнительные концепции теории игр:

1. **Справедливость (Fairness):** Алгоритм обеспечивает пропорциональный раздел (proportional division), где каждый получает не менее 1/N добычи.

2. **Эффективность по Парето:** При правильном выполнении алгоритма, раздел является эффективным по Парето, так как невозможно улучшить положение одного игрока, не ухудшив положение другого (при фиксированных субъективных оценках).

3. **Зависть (Envy-freeness):** В некоторых вариантах алгоритма можно достичь беззавистного раздела (envy-free division), где ни один игрок не предпочитает долю другого своей собственной.

4. **Механизм дизайна:** Предложенные алгоритмы можно рассматривать как механизмы (mechanisms), которые индуцируют правдивое поведение игроков.

---

## Заключение

Задача о разделе добычи между разбойниками является классической задачей справедливого раздела (fair division problem), которая тесно связана с теорией игр. Предложенные алгоритмы обеспечивают справедливый раздел, при котором каждый участник получает не менее 1/N добычи со своей точки зрения. Алгоритмы могут быть рекурсивно обобщены для любого числа участников и обеспечивают существование равновесия Нэша при правильном выполнении.

